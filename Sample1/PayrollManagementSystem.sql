--PAYROLL MANAGEMENT SYSTEM

--EMPLOYEES TABLE

CREATE TABLE EMPLOYEES
(
 EMPLOYEE_ID VARCHAR2(10) NOT NULL,
 FIRST_NAME VARCHAR2(20) NOT NULL,
 LAST_NAME VARCHAR2(20) NOT NULL,
 DATE_OF_BIRTH DATE,
 HIRE_DATE DATE NOT NULL,
 EMAIL_ID VARCHAR2(30) NOT NULL,
 PHONE_NUMBER NUMBER(10) NOT NULL,
 MANAGER_ID VARCHAR2(10),
 GENDER VARCHAR2(20),
 ADDRESS VARCHAR2(50),
 CONSTRAINT EMPLOYEES_PK PRIMARY KEY (EMPLOYEE_ID)
);

SET DEFINE OFF;

INSERT ALL
INTO EMPLOYEES VALUES ('1000000001', 'AMIT', 'KUMAR', TO_DATE('72-03-27', 'RRRR-MM-DD'), TO_DATE('93-03-11', 'RRRR-MM-DD'), 'amitkumar@hotmail.com', 7418147953, '1000000005', 'MALE', '66/39 ASHOK VIHAR, NAINITAL')
INTO EMPLOYEES VALUES ('1000000002', 'BHAWANA', 'PANT', TO_DATE('87-08-03', 'RRRR-MM-DD'), TO_DATE('09-08-01', 'RRRR-MM-DD'), 'bhawanapant@gmail.com', 9506327422, '1000000001', 'FEMALE', 'HOUSE NUMBER 35, DURGA COLONY, NAINITAL')
INTO EMPLOYEES VALUES ('1000000003', 'PANKAJ', 'SINGH', TO_DATE('92-11-15', 'RRRR-MM-DD'), TO_DATE('12-07-22', 'RRRR-MM-DD'), 'pankajsingh@gmail.com', 9412146921, '1000000001', 'MALE', 'FLAT NUMBER P/32, MODERN RESIDENCY, HALDWANI')
INTO EMPLOYEES VALUES ('1000000004', 'NEHA', 'KAUR', TO_DATE('90-02-05', 'RRRR-MM-DD'), TO_DATE('11-09-12', 'RRRR-MM-DD'), 'nehakaur@ymail.com', 8737945102, '1000000002', 'FEMALE', 'N-32 CORBETT COLONY, RAMNAGAR')
INTO EMPLOYEES VALUES ('1000000005', 'KAMAL', 'MISHRA', TO_DATE('67-04-25', 'RRRR-MM-DD'), TO_DATE('90-12-13', 'RRRR-MM-DD'), 'kamalmishra@hotmail.com', 9718026437, 'NULL', 'MALE', 'MISHRA VILLA, KRISHNA KUNJ, HALDWANI')
SELECT * FROM DUAL;

--EMPLOYEE FINANCIALS

CREATE TABLE EMPLOYEE_FINANCIALS 
(
 AADHAAR_NUMBER VARCHAR2(12) NOT NULL,
 EMPLOYEE_ID VARCHAR2(10),
 ANNUAL_CTC NUMBER(15) NOT NULL,
 BANK_ACCOUNT_NUMBER VARCHAR2(20) NOT NULL,
 BANK_NAME VARCHAR2(30) NOT NULL,
 CONSTRAINT EMPLOYEE_FINANCIALS_PK PRIMARY KEY (AADHAAR_NUMBER),
 CONSTRAINT EMPLOYEE_FINANCIALS_FK FOREIGN KEY (EMPLOYEE_ID) REFERENCES EMPLOYEES (EMPLOYEE_ID)
);

SET DEFINE OFF;

INSERT ALL
INTO EMPLOYEE_FINANCIALS VALUES ('101201301132', '1000000001', 550000.0, '400827384827', 'STATE BANK OF INDIA')
INTO EMPLOYEE_FINANCIALS VALUES ('201301401298', '1000000002', 440000.0, '400920498372', 'HDFC BANK')
INTO EMPLOYEE_FINANCIALS VALUES ('470152016012', '1000000003', 550000.0, '401013611917', 'BANK OF BARODA')
INTO EMPLOYEE_FINANCIALS VALUES ('354837463653', '1000000004', 440000.0, '403434564087', 'PUNJAB NATIONAL BANK')
INTO EMPLOYEE_FINANCIALS VALUES ('502354523487', '1000000005', 660000.0, '402875882817', 'STATE BANK OF INDIA')
SELECT * FROM DUAL;

--SKILLS TABLE

CREATE TABLE SKILLS
(
 SKILL_ID VARCHAR2(10) NOT NULL,
 SKILL_NAME VARCHAR2(20),
 SKILL_DETAILS VARCHAR2(40),
 CONSTRAINT SKILL_PK PRIMARY KEY (SKILL_ID)
);

SET DEFINE OFF;

INSERT ALL
INTO SKILLS VALUES ('19253527', 'CLERICAL', 'ADMINISTRATION AND RECORDS')
INTO SKILLS VALUES ('19253746', 'COMMUNICATION', 'ENGLISH LANGUAGE')
INTO SKILLS VALUES ('19253965', 'COMPUTER USE', 'IT KNOWLEDGE')
INTO SKILLS VALUES ('19254184', 'CRITICAL THINKING', 'ANALYTICAL THINKING')
INTO SKILLS VALUES ('19254403', 'FINANCIAL', 'ACCOUNTING SKILLS')
INTO SKILLS VALUES ('19254622', 'ACCOUNTING', 'BUDGETARY SKILLS')
INTO SKILLS VALUES ('19254841', 'BUDGET', 'KNOWLEDGE ABOUT CASH FLOW')
INTO SKILLS VALUES ('19255060', 'HEALTH AND SAFETY', 'SAFETY REQUIREMENTS')
INTO SKILLS VALUES ('19255279', 'LEGAL', 'STATUTES')
INTO SKILLS VALUES ('19255498', 'MANAGERIAL', 'PROGRAM PLANNING')
SELECT * FROM DUAL;

--LOCATIONS TABLE

CREATE TABLE LOCATIONS
(
 LOCATION_ID VARCHAR(10) NOT NULL,
 LOCATION_NAME VARCHAR2(20) NOT NULL,
 LOCATION_ADDRESS VARCHAR2(40) NOT NULL,
 COUNTRY_NAME VARCHAR2(20),
 CONSTRAINT LOCATIONS_PK PRIMARY KEY (LOCATION_ID)
);

SET DEFINE OFF; 

INSERT ALL
INTO LOCATIONS VALUES ('1100', 'NEW DELHI', 'GURU NANAK COMPLEX, JANAKPURI', 'INDIA')
INTO LOCATIONS VALUES ('1200', 'MUMBAI', 'PACIFIC MALL, MARINE DRIVE', 'INDIA')
INTO LOCATIONS VALUES ('1300', 'NAINITAL', 'DURGA CITY COMPLEX, HALDWANI', 'INDIA')
INTO LOCATIONS VALUES ('1400', 'KOLKATA', 'SHUBHASH NAGAR, OLD MARKET', 'INDIA')
INTO LOCATIONS VALUES ('1500', 'CHANDIGARH', '23 MAIN STREET, ROCK GARDEN ROAD', 'INDIA')
INTO LOCATIONS VALUES ('1600', 'NEW DELHI', 'A/12 CANNAUGHT PALACE', 'INDIA')
INTO LOCATIONS VALUES ('1700', 'RAMNAGAR', 'INDIRA TOWERS, RAMNAGAR', 'INDIA')
SELECT * FROM DUAL;

--DEPARTMENTS TABLE

CREATE TABLE DEPARTMENTS
(
 DEPARTMENT_ID VARCHAR2(10) NOT NULL,
 DEPARTMENT_NAME VARCHAR2(20) NOT NULL,
 MANAGER_ID VARCHAR2(10),
 LOCATION_ID VARCHAR2(10) NOT NULL,
 CONSTRAINT DEPARTMENT_PK PRIMARY KEY (DEPARTMENT_ID),
 CONSTRAINT DEPARTMENT_FK FOREIGN KEY (LOCATION_ID) REFERENCES LOCATIONS (LOCATION_ID )
);

SET DEFINE OFF;

INSERT ALL
INTO DEPARTMENTS VALUES ('10', 'IT DEPARTMENT', '1000000001', '1100')
INTO DEPARTMENTS VALUES ('20', 'LEGAL DEPARTMENT', '1000000003', '1200')
INTO DEPARTMENTS VALUES ('30', 'ADMINISTRATION', 'NULL', '1300')
INTO DEPARTMENTS VALUES ('40', 'CLIENT SERVICE', '1000000004', '1400')
INTO DEPARTMENTS VALUES ('50', 'MARKETING', 'NULL', '1500')
INTO DEPARTMENTS VALUES ('60', 'PRODUCTION', 'NULL', '1600')
INTO DEPARTMENTS VALUES ('70', 'FINANCE', '1000000005', '1700')
INTO DEPARTMENTS VALUES ('80', 'SECURITY', '1000000002', '1300')
SELECT * FROM DUAL;

--JOB DETAILS TABLE

CREATE TABLE JOB_DETAILS
(
 JOB_ID VARCHAR2(10) NOT NULL,
 DEPARTMENT_ID VARCHAR2(10),
 JOB_TITLE VARCHAR2(20),
 WORKHOURS_WEEK NUMBER(10),
 PAYHOUR_RATE NUMBER(10),
 CONSTRAINT JOB_DETAILS_PK PRIMARY KEY (JOB_ID),
 CONSTRAINT JOB_DETAILS_FK FOREIGN KEY (DEPARTMENT_ID) REFERENCES DEPARTMENTS (DEPARTMENT_ID)
);

SET DEFINE OFF;

INSERT ALL
INTO JOB_DETAILS VALUES ('10110', '10', 'PROGRAMMER', 40.0, 300.0)
INTO JOB_DETAILS VALUES ('11121', '30', 'ADMIN STAFF', 40.0, 150.0)
INTO JOB_DETAILS VALUES ('12132', '30', 'ADMIN MANAGER', 48.0, 250.0)
INTO JOB_DETAILS VALUES ('13143', '10', 'SERVER MANAGER', 40.0, 150.0)
INTO JOB_DETAILS VALUES ('14154', '50', 'SALES EXECUTIVE', 40.0, 150.0)
INTO JOB_DETAILS VALUES ('15165', '50', 'SALES MANAGER', 48.0, 250.0)
INTO JOB_DETAILS VALUES ('17187', '40', 'SERVER', 40.0, 150.0)
INTO JOB_DETAILS VALUES ('18198', '40', 'SERVICE MANAGER', 48.0, 200.0)
INTO JOB_DETAILS VALUES ('21231', '70', 'FINANCE MANAGER', 48.0, 300.0)
INTO JOB_DETAILS VALUES ('22242', '50', 'SALES PERSON', 40.0, 150.0)
INTO JOB_DETAILS VALUES ('27297', '10', 'IT MANAGER', 48.0, 350.0)
INTO JOB_DETAILS VALUES ('30330', '20', 'CHIEF ADVISOR', 48.0, 350.0)
INTO JOB_DETAILS VALUES ('31341', '20', 'LEGAL CONSULTANT', 40.0, 250.0)
INTO JOB_DETAILS VALUES ('32352', '60', 'WORKER', 40.0, 150.0)
INTO JOB_DETAILS VALUES ('33363', '60', 'PRODUCTION MANAGER', 48.0, 240.0)
INTO JOB_DETAILS VALUES ('34374', '70', 'ACCOUNTANT', 40.0, 180.0)
INTO JOB_DETAILS VALUES ('35385', '80', 'SECURITY MANAGER', 48.0, 250.0)
INTO JOB_DETAILS VALUES ('36396', '80', 'GUARD', 40.0, 200.0)
SELECT * FROM DUAL;

--SKILL DETAILS

CREATE TABLE SKILL_DETAILS
(
 SKILL_ID VARCHAR2(10),
 EMPLOYEE_ID VARCHAR2(10),
 CONSTRAINT SKILL_FK FOREIGN KEY (EMPLOYEE_ID) REFERENCES EMPLOYEES (EMPLOYEE_ID)
);

SET DEFINE OFF;

INSERT ALL
INTO SKILL_DETAILS VALUES ('19253527', '1000000001')
INTO SKILL_DETAILS VALUES ('19253965', '1000000002')
INTO SKILL_DETAILS VALUES ('19255060', '1000000003')
INTO SKILL_DETAILS VALUES ('19254403', '1000000004')
INTO SKILL_DETAILS VALUES ('19255279', '1000000005')
SELECT * FROM DUAL;

--PAYROLL REVIEW TABLE

CREATE TABLE PAYROLL_REVIEW
(
 REVIEW_ID VARCHAR2(10) NOT NULL,
 EMPLOYEE_ID VARCHAR2(10),
 MONTH VARCHAR2(10),
 YEAR NUMBER(10),
 MANAGER_ID VARCHAR2(10),
 RVW_SUB_DATE DATE NOT NULL,
 RVW_APP_DATE DATE,
 APPROVAL_STATUS VARCHAR2(10),
 CONSTRAINT PAYROLL_REVIEW_PK PRIMARY KEY (REVIEW_ID),
 CONSTRAINT PAYROLL_REVIEW_FK FOREIGN KEY (EMPLOYEE_ID) REFERENCES EMPLOYEES (EMPLOYEE_ID)
);

SET DEFINE OFF;

INSERT ALL
INTO PAYROLL_REVIEW VALUES ('10001', '1000000001', 'JANUARY', 2017.0, '1000000005', TO_DATE('17-01-06', 'RRRR-MM-DD'), TO_DATE('17-01-07', 'RRRR-MM-DD'), 'Y')
INTO PAYROLL_REVIEW VALUES ('10002', '1000000002', 'JANUARY', 2017.0, '1000000001', TO_DATE('17-01-04', 'RRRR-MM-DD'), TO_DATE('17-01-08', 'RRRR-MM-DD'), 'Y')
INTO PAYROLL_REVIEW VALUES ('10003', '1000000003', 'JANUARY', 2017.0, '1000000001', TO_DATE('17-01-02', 'RRRR-MM-DD'), TO_DATE('17-01-04', 'RRRR-MM-DD'), 'Y')
INTO PAYROLL_REVIEW VALUES ('10004', '1000000004', 'JANUARY', 2017.0, '1000000002', TO_DATE('17-01-01', 'RRRR-MM-DD'), TO_DATE('17-01-04', 'RRRR-MM-DD'), 'Y')
INTO PAYROLL_REVIEW VALUES ('10005', '1000000005', 'JANUARY', 2017.0, 'NULL', TO_DATE('17-01-03', 'RRRR-MM-DD'), TO_DATE('17-01-07', 'RRRR-MM-DD'), 'Y')
SELECT * FROM DUAL;

--PAYROLL DETAILS TABLE

CREATE TABLE PAYROLL_DETAILS
(
 EMPLOYEE_ID VARCHAR2(10) NOT NULL,
 MONTH VARCHAR2(10),
 YEAR NUMBER(10),
 HOURS_WORKED NUMBER(10),
 EXTRA_HOURS_WORKED NUMBER(10),
 BONUS NUMBER(10),
 LEAVE_DAYS NUMBER(10),
 CONSTRAINT PAYROLL_DETAILS_FK FOREIGN KEY (EMPLOYEE_ID) REFERENCES EMPLOYEES (EMPLOYEE_ID)
);

SET DEFINE OFF;

INSERT ALL
INTO PAYROLL_DETAILS VALUES ('1000000001', 'JANUARY', 2017.0, 40.0, 4.0, 800.0, 0.0)
INTO PAYROLL_DETAILS VALUES ('1000000002', 'JANUARY', 2017.0, 40.0, 0.0, 0.0, 0.0)
INTO PAYROLL_DETAILS VALUES ('1000000003', 'JANUARY', 2017.0, 48.0, 0.0, 0.0, 0.0)
INTO PAYROLL_DETAILS VALUES ('1000000004', 'JANUARY', 2017.0, 40.0, 3.0, 600.0, 0.0)
INTO PAYROLL_DETAILS VALUES ('1000000005', 'JANUARY', 2017.0, 40.0, 5.0, 1000.0, 0.0)
SELECT * FROM DUAL;

--SALARY TRANSACTION HISTORY TABLE

CREATE TABLE SALARY_TXN_HISTORY
(
 TRANSACTION_ID VARCHAR2(10) NOT NULL,
 EMPLOYEE_ID VARCHAR2(10) NOT NULL,
 MONTH VARCHAR2(10) NOT NULL,
 YEAR NUMBER(10) NOT NULL,
 SALARY_AMOUNT NUMBER NOT NULL,
 TRANSACTION_DATE DATE NOT NULL,
 AADHAAR_NUMBER VARCHAR2(12) NOT NULL,
 REVIEW_ID VARCHAR2(10) NOT NULL,
 CONSTRAINT SALARY_TXN_HISTORY_PK PRIMARY KEY (TRANSACTION_ID),
 CONSTRAINT SALARY_TXN_HISTORY_FK FOREIGN KEY (EMPLOYEE_ID) REFERENCES EMPLOYEES (EMPLOYEE_ID),
 CONSTRAINT SALARY_TXN_HISTORY_FK2 FOREIGN KEY (REVIEW_ID) REFERENCES PAYROLL_REVIEW (REVIEW_ID),
 CONSTRAINT SALARY_TXN_HISTORY_FK3 FOREIGN KEY (AADHAAR_NUMBER) REFERENCES EMPLOYEE_FINANCIALS (AADHAAR_NUMBER)
);

SET DEFINE OFF;

INSERT ALL
INTO SALARY_TXN_HISTORY VALUES ('101010', '1000000001', 'DECEMBER', 2016.0, 48000.0, TO_DATE('17-01-01', 'RRRR-MM-DD'), '101201301132', '10001')
INTO SALARY_TXN_HISTORY VALUES ('101011', '1000000002', 'DECEMBER', 2016.0, 40000.0, TO_DATE('17-01-01', 'RRRR-MM-DD'), '201301401298', '10002')
INTO SALARY_TXN_HISTORY VALUES ('101012', '1000000003', 'DECEMBER', 2016.0, 40000.0, TO_DATE('17-01-01', 'RRRR-MM-DD'), '470152016012', '10003')
INTO SALARY_TXN_HISTORY VALUES ('101013', '1000000004', 'DECEMBER', 2016.0, 48000.0, TO_DATE('17-01-01', 'RRRR-MM-DD'), '354837463653', '10004')
INTO SALARY_TXN_HISTORY VALUES ('101014', '1000000005', 'DECEMBER', 2016.0, 60000.0, TO_DATE('17-01-01', 'RRRR-MM-DD'), '502354523487', '10005')
SELECT * FROM DUAL;